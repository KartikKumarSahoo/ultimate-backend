<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>ultimate-backend documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="./images/favicon.ico">
	    <link rel="stylesheet" href="./styles/style.css">
                 <link rel="stylesheet" href="./styles/material.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="./" class="navbar-brand">ultimate-backend documentation</a>
            <button type="button" class="btn btn-default btn-menu fa fa-bars" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
            <div id="book-search-input" role="search">
                <input type="text" placeholder="Type to search">
            </div>
            <nav>
            
                <ul class="list">
            
                    <li class="title">
                        <a href="./">ultimate-backend documentation</a>
                    </li>
            
                    <li class="divider"></li>
            
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="./"><span class="fa fa-home"></span>Getting started</a>
                        <ul class="links">
                                <li class="link">
                                    <a href="./"  class="active" ><span class="fa fa-file-text-o"></span>README</a>
                                </li>
                                <li class="link">
                                    <a  href="./overview.html" 
                                        
                                         href="./overview.html" 
                                        
                                        >
                                        <span class="fa fa-th"></span>Overview
                                    </a>
                                </li>
                        </ul>
                    </li>
            
            
            
            
            
            
            
            
            
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="./coverage.html" ><span class="fa fa-tasks"></span>Documentation coverage</a>
                    </li>
            
                    <li class="divider"></li>
                    <li class="copyright">
                            Documentation generated using <a href="https://compodoc.github.io/compodoc/" target="_blank">
                                        <img src=".//images/compodoc-vectorise.svg" class="img-responsive">
                            </a>
                    </li>
            
                </ul>
            
            </nav>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <nav>
                   
                       <ul class="list">
                   
                           <li class="title">
                               <a href="./">ultimate-backend documentation</a>
                           </li>
                   
                           <li class="divider"></li>
                   
                               <div id="book-search-input" role="search">
                                   <input type="text" placeholder="Type to search">
                               </div>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="./"><span class="fa fa-home"></span>Getting started</a>
                               <ul class="links">
                                       <li class="link">
                                           <a href="./"  class="active" ><span class="fa fa-file-text-o"></span>README</a>
                                       </li>
                                       <li class="link">
                                           <a  href="./overview.html" 
                                               
                                                href="./overview.html" 
                                               
                                               >
                                               <span class="fa fa-th"></span>Overview
                                           </a>
                                       </li>
                               </ul>
                           </li>
                   
                   
                   
                   
                   
                   
                   
                   
                   
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="./coverage.html" ><span class="fa fa-tasks"></span>Documentation coverage</a>
                           </li>
                   
                           <li class="divider"></li>
                           <li class="copyright">
                                   Documentation generated using <a href="https://compodoc.github.io/compodoc/" target="_blank">
                                               <img src=".//images/compodoc-vectorise.svg" class="img-responsive">
                                   </a>
                           </li>
                   
                       </ul>
                   
                   </nav>
               </div>
               <div class="content readme">
                   <div class="content-data">
<h1 align="center"><br>ULTIMATE BACKEND<br></h1>  

<p align="center"><br>  <bold>(WIP)</bold>: This is an enterprise scale advanced microservice pattern with GraphQL API and GRPC Microservices, based on Domain (DDD) using the command query responsibility segregation (CQRS) design pattern.<br>  Want to ask <a target="_blank" href="https://join.slack.com/t/ultimate-backend/shared_invite/zt-gd6kuuh2-B665Di4cRLqzVqXvhbmrHg">Rex Isaac Raphael</a> questions, join the slack channel :)<br></p><br>    <p align="center"><br></p>  

<p align="center"><br><img src="https://opencollective.com/ultimate-backend/tiers/sponsor/badge.svg?label=sponsor&color=brightgreen" /><br><a href="https://img.shields.io/github/license/juicycleff/ultimate-backend?style=flat-square" target="_blank"><img src="https://img.shields.io/github/license/juicycleff/ultimate-backend?style=flat-square" alt="License"/></a><br><a href="https://img.shields.io/snyk/vulnerabilities/github/juicycleff/ultimate-backend?style=flat-square" target="_blank"><img src="https://img.shields.io/snyk/vulnerabilities/github/juicycleff/ultimate-backend?style=flat-square" alt="Snyk"/></a><br><a href="https://img.shields.io/github/languages/code-size/juicycleff/ultimate-backend?style=flat-square" target="_blank"><img src="https://img.shields.io/github/languages/code-size/juicycleff/ultimate-backend?style=flat-square" alt="Code Size"/></a><br><a href="https://img.shields.io/github/package-json/v/juicycleff/ultimate-backend?style=flat-square" target="_blank"><img src="https://img.shields.io/github/package-json/v/juicycleff/ultimate-backend?style=flat-square" alt="Version"/></a><br><a href="https://img.shields.io/github/languages/top/juicycleff/ultimate-backend?style=flat-square" target="_blank"><img src="https://img.shields.io/github/languages/top/juicycleff/ultimate-backend?style=flat-square" alt="Top Language"/></a><br><a href="https://img.shields.io/codacy/grade/dc460840375d4ac995f5647a5ed10179?style=flat-square" target="_blank"><img src="https://img.shields.io/codacy/grade/dc460840375d4ac995f5647a5ed10179?style=flat-square" alt="Top Language"/></a><br></p>  

<h2 id="description">Description</h2>
<p>This should be the go to backend base for your next scalable project. This is a proof of concept project designed to be extremely slim and scalable, with distributed data request and process handling, built from the ground up for production use. It comes with Multi-Tenancy SaaS support, following different multi-tenancy database strategy as well as different resolver patterns<br>to identify your tenants. The goal is to give your next big project that extra leap to awesomeness. To get started read the instructions below. With support for both <a href="https://eventstore.org">Event Store</a> and <a href="https://nats.io">NATS Streaming</a> for event streaming and Kafka comming soon.</p>
<blockquote>
<p><strong>Note:</strong> Seeing alot of clone of the project which is good, but please if you can üåü the project as it also motivates me in improving the project. Also the docker azure CI setups is broken and will be fixed soon.</p>
</blockquote>
<blockquote>
<p><strong>Note:</strong> Also ultimate backend is coming to <code>rust</code> as a complete microservice framework, if you want to be part of it and you program in <code>rust</code>, please write to me. Here is the repo <a href="https://github.com/juicycleff/ultimate">ultimate</a></p>
</blockquote>
<h2 id="features">Features</h2>
<p>Software features  </p>
<ul>
<li>‚úÖ CQRS  </li>
<li>‚úÖ Software as a Service  </li>
<li>‚úÖ Authentication by stateful session (Password) GraphQL  </li>
<li>‚úÖ OAuth2 Authentication (Google, Github, Facebook) REST  </li>
<li>‚úÖ User  </li>
<li>‚úÖ Event Sourcing  </li>
<li>‚úÖ GraphQL API  </li>
<li>‚úÖ GRPC Microservice  </li>
<li>‚úÖ Emailing Queue  </li>
<li>‚úÖ Role Based Access Control  </li>
<li>‚úÖ Multi Tenancy  </li>
<li>‚úÖ Payment (<a href="https://stripe.com/">Stripe</a>)  </li>
<li>‚úÖ SaaS Plans (<a href="https://stripe.com/">Stripe</a>)  </li>
<li>‚úÖ Security</li>
<li>‚úÖ Service Discovery (Default on Consul), supports ectd, Kubernetes  </li>
<li>‚úÖ <a href="https://github.com/juicycleff/ultimate-backend-dashboard">React SSR Starter Kit</a></li>
<li>‚ùå (WiP) Documentation  </li>
<li>‚úÖ (WiP) Webhooks  </li>
<li>‚ùå (WiP) Support for language translation  </li>
<li>‚ùå (WiP) GraphQL dataloaders</li>
</ul>
<h2 id="software-stack">Software stack</h2>
<table class="table table-bordered compodoc-table">
<thead>
<tr>
<th></th>
<th>Required</th>
<th>Optional</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Store and cache</code></td>
<td><a href="https://eventstore.org">Event Store (Event Source Store)</a>, <a href="https://redis.io/">Redis (Queue &amp; cache)</a> and <a href="https://www.mongodb.com/">MongoDB (Database)</a></td>
<td><a href="https://www.arangodb.com/">ArangoDB (Database)</a>, <a href="https://nats.io">NATS Streaming (Event Source Store)</a></td>
</tr>
<tr>
<td><code>Stack and frameworks</code></td>
<td><a href="https://nestjs.com">NestJS (Server Framework)</a>, <a href="https://nodejs.org">NodeJS (System runtime)</a>, <a href="https://www.typescriptlang.org">Typescript</a>, <a href="https://expressjs.com">Express JS</a>, <a href="https://www.fastify.io">Fastify</a>, <a href="https://grpc.io/">GRPC</a>, <a href="https://nestcloud.org/">NestCloud</a> and <a href="https://www.apollographql.com">Apollo GraphQL</a></td>
<td>none</td>
</tr>
<tr>
<td><code>Deployment and containerization</code></td>
<td><a href="https://www.docker.com/">Docker</a></td>
<td><a href="https://kubernetes.io/">Kubernetes</a>, <a href="https://azure.microsoft.com/en-us/services/devops/pipelines/">Azure Pipeline</a>, GitLab CI</td>
<td></td>
</tr>
<tr>
<td><code>Service Registry</code></td>
<td><a href="https://consul.io/">Consul</a></td>
<td><a href="https://kubernetes.io/">Kubernetes</a> and <a href="https://etcd.io/">etcd</a></td>
</tr>
</tbody>
</table>
<h2 id="folder-structure">Folder Structure</h2>
<p>Senior candidate in the folder structure is the <code>/app</code> folder. This folder contains all executable programs or in this case microservices</p>
<ul>
<li><code>/app/service-access</code> The access microservice handles access token management for each tenant in the system. It also validates current tenant credentials against a tenant specific resources. It is the gate keeper for your tenant api.</li>
<li><code>/app/service-account</code> The account microservice handles user account commands and queries such as creating and validating new and current users in the system.</li>
<li><code>/app/service-tenant</code> The tenant microservice handles creating new tenants as well as managing tenant specific commands and queries.</li>
<li><code>/app/service-role</code> Similar to service-access, this service validates users based on roles against the entire system and tenants they belong to. This service handles only user authorization, where service-access is for tenant access keys for external api.</li>
<li><code>/app/service-notification</code> The microservice performs notification tasks in the entire systems. Right now it supports emailing, but can be extended to support push notification as well as activity feeds.</li>
<li><code>/app/service-billing</code> The billing microservice manages billing and payment commands. It is tightly integrated with Stripe, but can be easily replaced.</li>
<li><code>/app/service-project</code> This microservice is merely an example of supporting multi-tenant database strategy. It holds no other significance.</li>
</ul>
<p>The next important folder is the  <code>/lib</code> folder. This folder contains all internal libraries that is depended upon by the microservices, and they are,</p>
<ul>
<li><code>/lib/common</code> House shared/common modules in the project.</li>
<li><code>/lib/core</code> This is the core module of ultimate backend and houses most of the codebase that wires everything together.</li>
<li><code>/lib/repo-orm</code> This library will be extracted in the future as it matures. It is aimed at being a simple, less cluttered NoSQL multi-tenant object relational mapper (ORM), It supports caching, MongoDB and ArangoDB, with support for FaunaDB in the works.</li>
<li><code>/lib/contracts</code> Shared contracts for both typescript typings and graphql code first types, are stored here.</li>
<li><code>/lib/repository</code> It holds all repositories used in the microservices, and this repository and created from the repo-rom library.</li>
<li><p><code>/lib/proto-schema</code> All GRPC protobuf files required by each service, is stored in here and shared amongst services that depends on them.</p>
<p>Other folders such as <code>iac</code> which simply means Infrastructure as Code is teraform setup for creating a kubernetes cluster with just a simple command for running the microservices. <code>scripts</code> contains helper bash scripts for CI/CD.</p>
</li>
</ul>
<h2 id="installation">Installation</h2>
<pre><code class="hljs bash">$ yarn install</code></pre><h2 id="configuration">Configuration</h2>
<p>Before starting the services, please create the appropriate consul (Default service registry Consul) kv store config for all the services. You can find the example config<br>in the folders of each service called <code>config.example</code>. The consul config key of say the <code>account service</code> should be<br><code>ultimatebackend/config/io.ultimatebackend.srv.account</code> and just paste the config.yaml content in the consul store for that key in yaml and save.<br>You will need to set your sendgrid api key, so the backend can send emails on signup etc. If using stripe for payments you&#39;ll also need to put your public and private keys there too.<br>You can opt in for <code>etcd</code> or <code>kubernetes</code> as <code>service registry</code>. </p>
<p>Alternatively, you can do the following</p>
<pre><code class="hljs bash">$ consul agent --dev <span class="hljs-comment"># This starts the local consul server</span><br>$ consul kv import @consul_kv.json <span class="hljs-comment"># This imports the KV exported earlier. Refer: https://www.consul.io/commands/kv/import</span></code></pre><h2 id="usage">Usage</h2>
<h3 id="with-docker-locally">With Docker locally</h3>
<pre><code class="hljs bash">$ docker-compose --project-directory=. -f docker-compose.dev.yml up --build</code></pre><blockquote>
<p><strong>Note:</strong> I&#39;ve seen some issues with consul docker image and so would recommend setting up consul manually before running this command</p>
</blockquote>
<h3 id="without-docker-locally">Without Docker locally</h3>
<p>Consul, Mongodb, redis, memcached, and eventstore all need to be started first as our microservices need to connect to them.  </p>
<p>Start consul locally  </p>
<pre><code class="hljs bash">consul agent --dev  </code></pre><p>For help installing consul on your local machine, visit <a href="https://consul.io/">Consul Website</a></p>
<p>Start mongodb locally  </p>
<pre><code class="hljs bash">mongod  </code></pre><p>If you have docker installed  </p>
<pre><code class="hljs bash">docker run -d -p 27017:27017 mongo  <br>docker run -d -p 1113:1113 -p 2113:2113 eventstore/eventstore --insecure <span class="hljs-comment"># insecure flag specifies no certificate required - suitable for devmode </span><br>docker run -d -p 6379:6379 redis  </code></pre><p>Otherwise, you can install and run redis and eventstore locally if you choose.  </p>
<h3 id="running-the-microservices">Running the microservices</h3>
<p>You should start the microservices in any other. Example  </p>
<pre><code class="hljs bash"><br><span class="hljs-comment"># Generate protobuf typescript definitions and please fix the path for timestamps import (You should do this only when you update the protobuf files)</span><br><span class="hljs-comment"># and also build the proto-scheme lib (You should do this only when you update the protobuf files)</span><br><span class="hljs-comment"># in `lib/proto-schem`</span><br><span class="hljs-comment"># Also adds configuration(config.example files) to consul K/V registry (consul need to be running)</span><br><span class="hljs-comment"># You need jq and yq programs to use it   </span><br>$ yarn setup:<span class="hljs-built_in">local</span><br><br><span class="hljs-comment"># Start the account service  </span><br>$ npx nest start service-account  <br><br><span class="hljs-comment"># Start the access service  </span><br>$ npx nest start service-access  <br><br><span class="hljs-comment"># Start the role service  </span><br>$ npx nest start service-role  <br><br><span class="hljs-comment"># Start the graphql api  </span><br>$ npx nest start api-admin  <br></code></pre><blockquote>
<p><strong>Note:</strong> You don&#39;t need all services running plus you can start them in any order.</p>
</blockquote>
<h3 id="alternative-method-of-running-services">Alternative method of running services</h3>
<p>If you find the nest cli using too much memory running each service, you can build them first and then run them:  </p>
<p>Build each service:  </p>
<pre><code class="hljs bash">npx nest build service-account  <br>npx nest build service-notification  <br>npx nest build service-billing  <br>npx nest build service-project  <br>npx nest build service-tenant  <br>npx nest build service-access  <br>npx nest build service-role  </code></pre><p>Each service is built and written into dist/apps directory from where you can directly run each service with nodejs. Running each service with <code>npx nest start</code> uses three orders of magnitude more memory than this method so you will use a lot less memory!  </p>
<p>Run each service in a separate terminal:  </p>
<pre><code class="hljs bash">node dist/apps/service-account/main.js  <br>node dist/apps/service-notification/main.js  <br>node dist/apps/service-billing/main.js  <br>node dist/apps/service-project/main.js  <br>node dist/apps/service-tenant/main.js  <br>node dist/apps/service-access/main.js  </code></pre><p>With the databases and the services running you can now start the gateways as mentioned above.  </p>
<pre><code class="hljs bash">yarn start:dev api-admin  </code></pre><h2 id="get-started-by-registering-a-user-on-the-admin-gateway">Get started by registering a user on the admin gateway</h2>
<p>In the graphql playground running at <a href="http://localhost:4000//graph">http://localhost:4000//graph</a> you can register a user:  </p>
<pre><code class="hljs graphql">mutation register {  <br>  account {  <br>    register(input:{  <br>        firstname: "Alice"  <br>        lastname: "Bob"  <br>        email: "AliceBobsEmail@protonmail.com"  <br>        password: "supersecretpassword"  <br>    }) {  <br>      token  <br>    }  <br>  }  <br>}  </code></pre><p>All going well you should have received the following reply as well as an email with a verification code as well as a jwt token that contains both email and verification code for your frontend  </p>
<pre><code class="hljs undefined">{  <br>    "data": {  <br>        "account": {  <br>            "register": {  <br>                "token": "gtdjghdrtd65edjhc-chxgfxjtgzrkzxyzxtrs45wi6kydch"  <br>            }  <br>        }  <br>    }  <br>}  </code></pre><h2 id="quick-tips">Quick Tips</h2>
<h4 id="generating-dynamic-mongo-filter-graphql-type-">Generating dynamic mongo filter GraphQL type.</h4>
<p>You can generate dynamic graphql filter by decorating the fields you want to be<br>avaiable in your generated filter type with the <code>@Filterable()</code> decorator like below  </p>
<pre><code class="hljs typescript"><span class="hljs-keyword">import</span> { Filterable } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ultimatebackend/core'</span>;  <br><br><span class="hljs-meta">@ObjectType</span>()  <br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> Tenant <span class="hljs-keyword">extends</span> Node {  <br><br>  <span class="hljs-meta">@Filterable</span>()  <br>  <span class="hljs-meta">@Field</span>({ nullable: <span class="hljs-literal">true</span> })  <br>  name: <span class="hljs-built_in">string</span>;  <br><br>  <span class="hljs-meta">@Filterable</span>()  <br>  <span class="hljs-meta">@Field</span>({ nullable: <span class="hljs-literal">true</span> })  <br>  normalizedName: <span class="hljs-built_in">string</span>;  <br>}  </code></pre><p>After adding decorator to the fields you can now add generate your graphql input type.</p>
<blockquote>
<p><strong>Note:</strong> Enums and sub-types not supported at the moment.</p>
</blockquote>
<pre><code class="hljs typescript"><span class="hljs-keyword">import</span> { FilterMongo } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ultimatebackend/contracts'</span>;  <br><br><span class="hljs-meta">@InputType</span>()  <br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> TenantFilterInput <span class="hljs-keyword">extends</span> FilterMongo(Tenant, { simple: <span class="hljs-literal">true</span> }) {}  </code></pre><h4 id="multi-tenant-database-for-services-">Multi-tenant Database for services.</h4>
<p>You can enable multi-tenant database support in your micro-service by adding this</p>
<pre><code class="hljs typescript">MongoModule.registerAsync({  <br> useClass: MongoMultiTenantConfigService,  <br>})</code></pre><p>code block to the service app module. For example;</p>
<pre><code class="hljs typescript"><span class="hljs-keyword">import</span> { Module } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;  <br><span class="hljs-keyword">import</span> { MongoModule } <span class="hljs-keyword">from</span> <span class="hljs-string">'@juicycleff/repo-orm/database'</span>;  <br><span class="hljs-keyword">import</span> { MongoMultiTenantConfigService } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ultimatebackend/core/mutiltenancy'</span>;  <br><br><span class="hljs-meta">@Module</span>({  <br>  imports: [<br>    <span class="hljs-comment">// ...</span><br>    MongoModule.registerAsync({  <br>      useClass: MongoMultiTenantConfigService,  <br>    }),<br>    <span class="hljs-comment">// ...</span><br>  ],  <br>})  <br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> AppModule {}  </code></pre><p>A good example is the <code>service-project</code> microservice.</p>
<p>Next you must enable multi-tenancy in the  <code>main.ts</code> file of the <code>api-admin</code> service or any other api type microservice you create in your project.  </p>
<pre><code class="hljs typescript"><span class="hljs-keyword">import</span> { NestFactory } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/core'</span>;  <br><span class="hljs-keyword">import</span> { NestCloud } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestcloud/core'</span>;  <br><span class="hljs-keyword">import</span> { AppModule } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.module'</span>;  <br><span class="hljs-keyword">import</span> { enableMultiTenancy, TenantDatabaseStrategy } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ultimatebackend/core/mutiltenancy'</span>;  <br><br><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bootstrap</span>(<span class="hljs-params"></span>) </span>{  <br>  <span class="hljs-keyword">const</span> app = NestCloud.create(<span class="hljs-keyword">await</span> NestFactory.create(AppModule));  <br><br>  app.use(enableMultiTenancy({  <br>    enabled: <span class="hljs-literal">true</span>,  <br>    tenantResolver: {  <br>      resolverType: <span class="hljs-string">'Header'</span>,  <br>      headerKeys: {  <br>        tenant: <span class="hljs-string">'x-tenant-id'</span>,  <br>        apiKey: <span class="hljs-string">'x-tenant-key'</span>,  <br>      },  <br>      requiresToken: <span class="hljs-literal">true</span>,  <br>    },  <br>    databaseStrategy: TenantDatabaseStrategy.DataIsolation,  <br>  }));  <br><br>  <span class="hljs-comment">// ..... code continues  </span><br>}  <br></code></pre><h4 id="access-token-with-scopes">Access token with scopes</h4>
<p>Access tokens scopes just a combination of action and resource identifier. For example, take this mutation;</p>
<pre><code class="hljs typescript">  <span class="hljs-meta">@UseGuards</span>(GqlAuthGuard)<br>  <span class="hljs-meta">@Resource</span>({ name: <span class="hljs-string">'billing'</span>, identify: <span class="hljs-string">'billing:card'</span>, roles: [<span class="hljs-string">'customer'</span>], action: <span class="hljs-string">'update'</span> })<br>  <span class="hljs-meta">@ResolveField</span>(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> Card)<br>  <span class="hljs-keyword">async</span> create(<span class="hljs-meta">@Args</span>(<span class="hljs-string">'input'</span>) input: CreateCardInput, <span class="hljs-meta">@Context</span>() ctx: GqlContext): <span class="hljs-built_in">Promise</span>&lt;Card&gt; {<br>    <span class="hljs-comment">// @ts-ignore</span><br>    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.service.billing.createCard({...input}, setRpcContext(ctx)).toPromise();<br>    <span class="hljs-keyword">return</span> result.card;<br>  }</code></pre><p>Your access token scope will be <code>update_billing:card</code> and so your mutation to create an access token should look like this</p>
<pre><code class="hljs graphql">mutation {<br>  accessToken {<br>    create(input: {<br>      name: "my-superb-token",<br>      scopes: ["update_billing:card"]<br>    }) {<br>      token<br>      id<br>      name<br>      active<br>    }<br>  }<br>}</code></pre><p>That&#39;s all you need to know when creating access token which should be used together with your tenant normalized name to access the API<br>without a logged in user.</p>
<h4 id="more-docs-updates-coming-">More docs updates coming.</h4>
<h2 id="test">Test</h2>
<pre><code class="hljs bash"><span class="hljs-comment"># unit tests  </span><br>$ yarn run <span class="hljs-built_in">test</span>  <br><br><span class="hljs-comment"># e2e tests  </span><br>$ yarn run <span class="hljs-built_in">test</span>:e2e  <br><br><span class="hljs-comment"># test coverage  </span><br>$ yarn run <span class="hljs-built_in">test</span>:cov  </code></pre><h3 id="financial-contributors">Financial Contributors</h3>
<p>Become a financial contributor. Your funds go to; people in need [<a href="https://opencollective.com/ultimate-backend/contribute">Contribute</a>]</p>
<h4 id="backers">Backers</h4>
<p><a href="https://opencollective.com/ultimate-backend"><img src="https://opencollective.com/ultimate-backend/backer.svg?width=890"></a></p>
<h4 id="sponsors">Sponsors</h4>
<p>Support this project with your organization. Your logo will show up here with a link to your website. [<a href="https://opencollective.com/ultimate-backend/contribute">Contribute</a>]</p>
<p><a href="https://opencollective.com/ultimate-backend/sponsor/0/website"><img src="https://opencollective.com/ultimate-backend/sponsor/0/avatar.svg"></a><br><a href="https://opencollective.com/ultimate-backend/sponsor/1/website"><img src="https://opencollective.com/ultimate-backend/sponsor/1/avatar.svg"></a><br><a href="https://opencollective.com/ultimate-backend/sponsor/2/website"><img src="https://opencollective.com/ultimate-backend/sponsor/2/avatar.svg"></a><br><a href="https://opencollective.com/ultimate-backend/sponsor/3/website"><img src="https://opencollective.com/ultimate-backend/sponsor/3/avatar.svg"></a><br><a href="https://opencollective.com/ultimate-backend/sponsor/4/website"><img src="https://opencollective.com/ultimate-backend/sponsor/4/avatar.svg"></a><br><a href="https://opencollective.com/ultimate-backend/sponsor/5/website"><img src="https://opencollective.com/ultimate-backend/sponsor/5/avatar.svg"></a><br><a href="https://opencollective.com/ultimate-backend/sponsor/6/website"><img src="https://opencollective.com/ultimate-backend/sponsor/6/avatar.svg"></a><br><a href="https://opencollective.com/ultimate-backend/sponsor/7/website"><img src="https://opencollective.com/ultimate-backend/sponsor/7/avatar.svg"></a><br><a href="https://opencollective.com/ultimate-backend/sponsor/8/website"><img src="https://opencollective.com/ultimate-backend/sponsor/8/avatar.svg"></a><br><a href="https://opencollective.com/ultimate-backend/sponsor/9/website"><img src="https://opencollective.com/ultimate-backend/sponsor/9/avatar.svg"></a></p>
<h2 id="my-other-projects">My Other Projects</h2>
<p>  Here are some of my projects, show some love and start them if you find them helpful :)</p>
<ul>
<li><a href="https://github.com/juicycleff/nestjs-event-store">nestjs-event-store</a></li>
<li><a href="https://github.com/juicycleff/casbin-mongodb-adapter">casbin-mongodb-adapter</a></li>
<li><a href="https://github.com/juicycleff/nestjs-casbin">nestjs-casbin</a></li>
<li><a href="https://github.com/snowballdigital/flutter-unity-view-widget">flutter-unity-view-widget</a></li>
</ul>
<h2 id="special-thanks">Special Thanks</h2>
<p>  This project wouldn&#39;t be possible without these two awesome projects,<br>  <a href="https://nestjs.com">NestJS (Server Framework)</a> and <a href="https://nestcloud.org/">NestCloud</a>, please make sure to Star them.</p>
<h2 id="license">License</h2>
<p>  This project is <a href="LICENSE">MIT licensed</a>.</p>












                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
           </div>
       </div>

       <script src="./js/libs/bootstrap-native.js"></script>

       <script src="./js/libs/es6-shim.min.js"></script>
       <script src="./js/libs/EventDispatcher.js"></script>
       <script src="./js/libs/promise.min.js"></script>
       <script src="./js/libs/zepto.min.js"></script>

       <script src="./js/compodoc.js"></script>

       <script src="./js/search/search.js"></script>
       <script src="./js/search/lunr.min.js"></script>
       <script src="./js/search/search-lunr.js"></script>

       <script src="./js/menu.js"></script>
       <script src="./js/libs/highlight.pack.js"></script>
       <script src="./js/libs/highlightjs-line-numbers.min.js"></script>
       <script src="./js/search/search_index.js"></script>
       <script>
            document.addEventListener('DOMContentLoaded', function() {
                hljs.initHighlightingOnLoad();
                hljs.initLineNumbersOnLoad();
            });
       </script>

    </body>
</html>
